# MineContext äº§å“åŠŸèƒ½è®¾è®¡æ–‡æ¡£

> åŸºäºçº¯å‰ç«¯æ¶æ„ï¼ˆElectron + Node.jsï¼‰çš„æ™ºèƒ½ä¸Šä¸‹æ–‡æ„ŸçŸ¥åº”ç”¨

---

## æ ¸å¿ƒä»·å€¼ä¸»å¼ 

**"è®©ä½ çš„å±å¹•æˆä¸ºç¬¬äºŒå¤§è„‘"** â€”â€” é€šè¿‡æŒç»­çš„å±å¹•æ„ŸçŸ¥ã€è¯­ä¹‰ç†è§£å’Œæ™ºèƒ½åˆ†æï¼Œå¸®åŠ©ç”¨æˆ·ï¼š

- è‡ªåŠ¨è®°å½•å·¥ä½œ/å­¦ä¹ è½¨è¿¹
- è·å–å®æ—¶æ´è§å’Œå»ºè®®
- èšç„¦ç‰¹å®šä¸»é¢˜å¹¶æ²‰æ·€çŸ¥è¯†

---

## åŠŸèƒ½æ¨¡å—æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MineContext åŠŸèƒ½æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   åŠŸèƒ½ä¸€      â”‚    â”‚   åŠŸèƒ½äºŒ      â”‚    â”‚   åŠŸèƒ½ä¸‰      â”‚              â”‚
â”‚  â”‚  Context     â”‚    â”‚   Smart      â”‚    â”‚   Focus      â”‚              â”‚
â”‚  â”‚  Summary     â”‚    â”‚    Tips      â”‚    â”‚   Mode       â”‚              â”‚
â”‚  â”‚  å®šæ—¶æ€»ç»“æ¨é€  â”‚    â”‚  æ™ºèƒ½æ´è§ç³»ç»Ÿ  â”‚    â”‚  ä¸»é¢˜èšç„¦æ¨¡å¼  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                   â”‚                   â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                             â”‚                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                    â”‚   Core Engine   â”‚                                  â”‚
â”‚                    â”‚  æˆªå›¾é‡‡é›†â†’VLMâ†’åˆå¹¶â†’å­˜å‚¨                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åŠŸèƒ½ä¸€ï¼šContext Summaryï¼ˆä¸Šä¸‹æ–‡å®šæ—¶æ€»ç»“ï¼‰

### åŠŸèƒ½æ¦‚è¿°

æ¯ **15 åˆ†é’Ÿ** è‡ªåŠ¨åˆ†æç”¨æˆ·çš„å±å¹•æ´»åŠ¨ï¼Œç”Ÿæˆç®€æ´çš„å·¥ä½œ/å­¦ä¹ æ€»ç»“å¹¶æ¨é€é€šçŸ¥ã€‚

### ç”¨æˆ·åœºæ™¯

> _"æˆ‘åˆšåˆš 15 åˆ†é’Ÿåšäº†ä»€ä¹ˆï¼Ÿæœ‰æ—¶å€™å¿™èµ·æ¥å°±å¿˜äº†æ—¶é—´æµå‘ã€‚"_

### åŠŸèƒ½è¯¦æƒ…

| ç‰¹æ€§         | è¯´æ˜                                       |
| :----------- | :----------------------------------------- |
| **è§¦å‘æ–¹å¼** | å®šæ—¶è§¦å‘ï¼ˆé»˜è®¤ 15 åˆ†é’Ÿï¼Œå¯é…ç½® 5-60 åˆ†é’Ÿï¼‰ |
| **æ•°æ®æ¥æº** | å‘é‡åº“ä¸­æœ€è¿‘æ—¶é—´æ®µçš„ `ProcessedContext`    |
| **è¾“å‡ºå½¢å¼** | ç³»ç»Ÿé€šçŸ¥ / åº”ç”¨å†… Toast / æ—¶é—´çº¿å¡ç‰‡       |
| **å¯é…ç½®é¡¹** | æ¨é€é—´éš”ã€é™é»˜æ—¶æ®µã€æ‘˜è¦è¯¦ç»†ç¨‹åº¦           |

### è¾“å‡ºç¤ºä¾‹

```
ğŸ“Š è¿‡å» 15 åˆ†é’Ÿæ€»ç»“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”§ ä¸»è¦æ´»åŠ¨ï¼šPython æ•°æ®å¤„ç†å¼€å‘
ğŸ“ å†…å®¹æ‘˜è¦ï¼šåœ¨ VS Code ä¸­ç¼–å†™ pandas æ•°æ®æ¸…æ´—è„šæœ¬ï¼Œ
   ä¿®å¤äº†ä¸€ä¸ª TypeErrorï¼ŒæŸ¥é˜…äº† DataFrame.merge() æ–‡æ¡£
â±ï¸ ä¸“æ³¨åº¦ï¼šé«˜ï¼ˆå•ä¸€ä»»åŠ¡ï¼‰
```

### æŠ€æœ¯å®ç°è¦ç‚¹

```typescript
interface SummaryConfig {
  interval: number; // æ¨é€é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  quietHours: [number, number]; // é™é»˜æ—¶æ®µ [startHour, endHour]
  detailLevel: "brief" | "normal" | "detailed";
}

interface ContextSummary {
  timeRange: { start: Date; end: Date };
  mainActivity: string;
  summary: string;
  focusScore: number; // 0-100 ä¸“æ³¨åº¦è¯„åˆ†
  categoryDistribution: Record<string, number>;
}
```

---

## åŠŸèƒ½äºŒï¼šSmart Tipsï¼ˆæ™ºèƒ½æ´è§ç³»ç»Ÿï¼‰

### åŠŸèƒ½æ¦‚è¿°

åŸºäºç”¨æˆ·å½“å‰ä¸Šä¸‹æ–‡ï¼Œ**ä¸»åŠ¨æ¨é€** èšç„¦å»ºè®®ã€å­¦ä¹ èµ„æºå’Œç›¸å…³èµ„è®¯ï¼Œå¸®åŠ©ç”¨æˆ·ä¿æŒé«˜æ•ˆå’Œè·å–æœ‰ä»·å€¼ä¿¡æ¯ã€‚

### ç”¨æˆ·åœºæ™¯

> _"æˆ‘å·²ç»åœ¨è¿™ä¸ªé—®é¢˜ä¸Šå¡äº† 30 åˆ†é’Ÿï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ"_ > _"æˆ‘æ­£åœ¨å­¦ TypeScriptï¼Œèƒ½ä¸èƒ½è‡ªåŠ¨æ¨èä¸€äº›å¥½çš„èµ„æºï¼Ÿ"_

### å­åŠŸèƒ½ 2.1ï¼šèšç„¦å»ºè®®ï¼ˆFocus Suggestionsï¼‰

**è§¦å‘æ¡ä»¶**ï¼šæ£€æµ‹åˆ°ç”¨æˆ·åœ¨æŸé¡¹ä»»åŠ¡ä¸ŠæŒç»­ä¸€æ®µæ—¶é—´

**è¾“å‡ºç±»å‹**ï¼š

- **æ·±åº¦å·¥ä½œé¼“åŠ±**ï¼šæŒç»­ä¸“æ³¨ 25+ åˆ†é’Ÿæ—¶ï¼Œè‚¯å®šç”¨æˆ·çŠ¶æ€
- **å¡é¡¿æé†’**ï¼šæ£€æµ‹åˆ°é¢‘ç¹åˆ‡æ¢æˆ–é”™è¯¯ç•Œé¢æ—¶ï¼Œå»ºè®®ä¼‘æ¯æˆ–æ¢æ€è·¯
- **ä¼˜å…ˆçº§å»ºè®®**ï¼šåŸºäº todo åˆ—è¡¨å’Œå½“å‰æ´»åŠ¨ï¼Œæé†’æ›´ç´§æ€¥çš„äº‹é¡¹

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸ’¡ æ´è§
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä½ å·²ç»åœ¨ã€Œè°ƒè¯• Python TypeErrorã€ä¸ŠèŠ±è´¹ 35 åˆ†é’Ÿã€‚
å»ºè®®ï¼š
â€¢ å°è¯•åœ¨ StackOverflow æœç´¢ç›¸å…³é”™è¯¯ä¿¡æ¯
â€¢ è€ƒè™‘ä½¿ç”¨ print debugging éš”ç¦»é—®é¢˜èŒƒå›´
â€¢ ä¼‘æ¯ 5 åˆ†é’Ÿï¼Œæ¢ä¸ªè§’åº¦æ€è€ƒ
```

### å­åŠŸèƒ½ 2.2ï¼šå­¦ä¹ è·¯å¾„è¿½è¸ªï¼ˆLearning Path Trackerï¼‰

**æ ¸å¿ƒèƒ½åŠ›**ï¼šè‡ªåŠ¨æ£€æµ‹å­¦ä¹ æ´»åŠ¨ï¼Œæ¨æ–­ç”¨æˆ·æ­£åœ¨å­¦ä¹ çš„ä¸»é¢˜ï¼Œå¹¶æ¨èå­¦ä¹ èµ„æºã€‚

**è§¦å‘æ¡ä»¶**ï¼š

- æ£€æµ‹åˆ°æ–‡æ¡£/æ•™ç¨‹ç±»å†…å®¹ï¼ˆPDFã€MDNã€å®˜æ–¹æ–‡æ¡£ç­‰ï¼‰
- åŒä¸€æŠ€æœ¯ä¸»é¢˜å‡ºç°é¢‘ç‡è¶…è¿‡é˜ˆå€¼
- ç”¨æˆ·åœ¨è¯¥ä¸»é¢˜ä¸Šç´¯è®¡æ—¶é—´è¶…è¿‡ 30 åˆ†é’Ÿ

**æ£€æµ‹åŸç†**ï¼šåŸºäº `SEMANTIC_CONTEXT` åˆ†å¸ƒåˆ†æ

å­¦ä¹ è¿½è¸ª**ä¸æ–°å¢ä¸Šä¸‹æ–‡ç±»å‹**ï¼Œè€Œæ˜¯é€šè¿‡åˆ†ææ—¶é—´çª—å£å†… `SEMANTIC_CONTEXT` çš„åˆ†å¸ƒç‰¹å¾æ¥æ¨æ–­å­¦ä¹ è¡Œä¸ºï¼š

```typescript
interface LearningDetectionConfig {
  timeWindowMinutes: number; // åˆ†ææ—¶é—´çª—å£ï¼Œé»˜è®¤ 30 åˆ†é’Ÿ
  semanticRatioThreshold: number; // SEMANTIC_CONTEXT å æ¯”é˜ˆå€¼ï¼Œé»˜è®¤ 0.5
  topicSimilarityThreshold: number; // ä¸»é¢˜ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œé»˜è®¤ 0.6
  minContextCount: number; // æœ€å°ä¸Šä¸‹æ–‡æ•°é‡ï¼Œé»˜è®¤ 3
}

interface DetectedLearningSession {
  isLearning: boolean;
  topic: string | null; // æ¨æ–­çš„å­¦ä¹ ä¸»é¢˜ï¼ˆå¦‚ "TypeScript"ï¼‰
  confidence: number; // ç½®ä¿¡åº¦ 0-100
  duration: number; // æŒç»­æ—¶é•¿ï¼ˆç§’ï¼‰
  semanticRatio: number; // SEMANTIC_CONTEXT å®é™…å æ¯”
  topicSimilarity: number; // ä¸»é¢˜ç›¸ä¼¼åº¦å¾—åˆ†
  relatedContexts: ProcessedContext[];
  subtopics: string[]; // æ¶‰åŠçš„å­ä¸»é¢˜
}

class LearningDetector {
  /**
   * æ£€æµ‹æ˜¯å¦å¤„äºå­¦ä¹ çŠ¶æ€
   */
  async detect(): Promise<DetectedLearningSession> {
    // 1. è·å–æ—¶é—´çª—å£å†…çš„æ‰€æœ‰ä¸Šä¸‹æ–‡
    const allContexts = await this.fetchRecentContexts(timeWindow);

    // 2. è®¡ç®— SEMANTIC_CONTEXT å æ¯”
    const semanticContexts = allContexts.filter(
      (c) => c.extracted_data.context_type === "semantic_context"
    );
    const semanticRatio = semanticContexts.length / allContexts.length;

    // 3. åˆ†æä¸»é¢˜ä¸€è‡´æ€§ï¼ˆåŸºäºå…³é”®è¯é‡å åº¦ï¼‰
    const topicAnalysis = this.analyzeTopicConsistency(semanticContexts);

    // 4. ç»¼åˆåˆ¤å®š
    const isLearning = semanticRatio >= 0.5 && topicAnalysis.similarity >= 0.6;

    return { isLearning, topic: topicAnalysis.mainTopic /* ... */ };
  }

  /**
   * åˆ†æä¸»é¢˜ä¸€è‡´æ€§ï¼šåŸºäºå…³é”®è¯é‡å åº¦
   */
  private analyzeTopicConsistency(contexts: ProcessedContext[]): TopicAnalysis {
    // ç»Ÿè®¡å…³é”®è¯é¢‘ç‡
    const keywordFrequency = new Map<string, number>();
    for (const ctx of contexts) {
      for (const keyword of ctx.extracted_data.keywords) {
        keywordFrequency.set(keyword, (keywordFrequency.get(keyword) || 0) + 1);
      }
    }

    // æ‰¾å‡ºæ ¸å¿ƒå…³é”®è¯ï¼ˆå‡ºç°åœ¨ 50%+ çš„ä¸Šä¸‹æ–‡ä¸­ï¼‰
    const coreKeywords = [...keywordFrequency.entries()]
      .filter(([_, count]) => count >= contexts.length * 0.5)
      .map(([keyword]) => keyword);

    // è®¡ç®—ç›¸ä¼¼åº¦ï¼šæ ¸å¿ƒå…³é”®è¯è¦†ç›–çš„ä¸Šä¸‹æ–‡æ¯”ä¾‹
    const similarity =
      contexts.filter((ctx) =>
        ctx.extracted_data.keywords.some((k) => coreKeywords.includes(k))
      ).length / contexts.length;

    return { similarity, mainTopic: coreKeywords[0], coreKeywords };
  }
}
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸ“š å­¦ä¹ è¿½è¸ª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ£€æµ‹åˆ°ä½ æ­£åœ¨å­¦ä¹ ï¼šTypeScript
ç´¯è®¡æ—¶é•¿ï¼š2 å°æ—¶ 15 åˆ†é’Ÿï¼ˆä»Šæ—¥ 45 åˆ†é’Ÿï¼‰
å·²æ¶‰åŠï¼šåŸºç¡€ç±»å‹ã€æ¥å£å®šä¹‰ã€æ³›å‹å…¥é—¨

ğŸ’¡ å»ºè®®ä¸‹ä¸€æ­¥ï¼š
â€¢ å­¦ä¹  TypeScript é«˜çº§ç±»å‹ï¼ˆUtility Typesï¼‰
â€¢ å®è·µï¼šå°†ä¸€ä¸ªå°å‹ JS é¡¹ç›®è¿ç§»åˆ° TS
```

### å­åŠŸèƒ½ 2.3ï¼šWeb Search èµ„è®¯æ¨é€

**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·åœ¨æŸä¸ªä¸»é¢˜ä¸ŠæŒç»­å…³æ³¨è¶…è¿‡ **20 åˆ†é’Ÿ**

**æ•°æ®æ¥æº**ï¼š

- Tavily APIï¼ˆAI ä¼˜åŒ–æœç´¢ï¼‰
- Bing Web Search API
- ç‰¹å®šé¢†åŸŸ RSSï¼ˆå¦‚ Hacker Newsã€Dev.toï¼‰

**æœç´¢ç­–ç•¥**ï¼š

```typescript
interface WebSearchService {
  // ä»ä¸Šä¸‹æ–‡æå–æœç´¢å…³é”®è¯
  extractSearchQuery(contexts: ProcessedContext[]): string;

  // æ‰§è¡Œæœç´¢
  search(query: string, options: SearchOptions): Promise<SearchResult[]>;

  // è¿‡æ»¤ä¸ä¸Šä¸‹æ–‡ç›¸å…³çš„ç»“æœ
  filterRelevant(
    results: SearchResult[],
    contexts: ProcessedContext[]
  ): SearchResult[];

  // ç”Ÿæˆæ‘˜è¦å¡ç‰‡
  generateDigest(results: SearchResult[]): NewsDigest;
}

interface SearchOptions {
  recency: "day" | "week" | "month"; // æ—¶æ•ˆæ€§
  type: "news" | "tutorial" | "documentation" | "discussion";
  maxResults: number;
}

interface NewsDigest {
  topic: string;
  items: Array<{
    title: string;
    summary: string;
    url: string;
    source: string;
    publishedAt: Date;
    relevanceScore: number;
  }>;
}
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸŒ ç›¸å…³èµ„è®¯ Â· Next.js 16
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä½ å·²å…³æ³¨æ­¤ä¸»é¢˜ 25 åˆ†é’Ÿï¼Œä»¥ä¸‹æ˜¯æœ€æ–°åŠ¨æ€ï¼š

ğŸ“° Next.js 16 æ­£å¼å‘å¸ƒï¼šCache Components å…¨é¢å‡çº§
   æ¥æºï¼šVercel Blog Â· 2 å°æ—¶å‰
   æ‘˜è¦ï¼šæ–°ç‰ˆæœ¬å¼•å…¥äº†é©å‘½æ€§çš„ç¼“å­˜æœºåˆ¶...

ğŸ“– è¿ç§»æŒ‡å—ï¼šä» Next.js 15 åˆ° 16
   æ¥æºï¼šå®˜æ–¹æ–‡æ¡£ Â· 1 å¤©å‰

ğŸ’¬ ç¤¾åŒºè®¨è®ºï¼šCache Components æœ€ä½³å®è·µ
   æ¥æºï¼šReddit r/nextjs Â· 5 å°æ—¶å‰
```

### å­åŠŸèƒ½ 2.4ï¼šå­¦ä¹ èµ„æºæ¨è

**ä¸ Web Search ç»“åˆ**ï¼šå½“æ£€æµ‹åˆ°å­¦ä¹ æ´»åŠ¨æ—¶ï¼Œè‡ªåŠ¨æœç´¢å¹¶æ¨èä¼˜è´¨å­¦ä¹ èµ„æºã€‚

**æ¨èç±»å‹**ï¼š
| ç±»å‹ | è¯´æ˜ | æœç´¢å…³é”®è¯åç¼€ |
|:-----|:-----|:---------------|
| **å®˜æ–¹æ–‡æ¡£** | æœ€æƒå¨çš„å‚è€ƒ | `official documentation` |
| **å…¥é—¨æ•™ç¨‹** | é€‚åˆåˆå­¦è€… | `tutorial for beginners` |
| **å®æˆ˜é¡¹ç›®** | è¾¹åšè¾¹å­¦ | `project tutorial` |
| **è§†é¢‘è¯¾ç¨‹** | å¤šåª’ä½“å­¦ä¹  | `video course` |
| **æœ€ä½³å®è·µ** | è¿›é˜¶æå‡ | `best practices` |

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸ“– æ¨èå­¦ä¹ èµ„æº Â· TypeScript
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åŸºäºä½ çš„å­¦ä¹ è¿›åº¦ï¼ˆä¸­çº§ï¼‰ï¼Œæ¨èä»¥ä¸‹èµ„æºï¼š

ğŸ¯ å®˜æ–¹æ–‡æ¡£
   TypeScript Handbook - Utility Types
   https://www.typescriptlang.org/docs/handbook/utility-types.html

ğŸ¬ è§†é¢‘æ•™ç¨‹
   No BS TS - Advanced TypeScript
   https://youtube.com/...

ğŸ’» å®æˆ˜é¡¹ç›®
   Build a CLI tool with TypeScript
   https://github.com/...
```

### Smart Tips æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SmartTipService                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚  â”‚  TipTrigger     â”‚ â† äº‹ä»¶é©±åŠ¨ / å®šæ—¶æ£€æŸ¥                              â”‚
â”‚  â”‚  (è§¦å‘å™¨)        â”‚                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚           â”‚                                                              â”‚
â”‚           â–¼                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ FocusSuggestion â”‚    â”‚ LearningTracker â”‚    â”‚  WebSearcher    â”‚     â”‚
â”‚  â”‚   èšç„¦å»ºè®®       â”‚    â”‚   å­¦ä¹ è¿½è¸ª       â”‚    â”‚   èµ„è®¯æœç´¢      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚                      â”‚                      â”‚               â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                  â”‚                                       â”‚
â”‚                                  â–¼                                       â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                         â”‚  TipAggregator  â”‚                             â”‚
â”‚                         â”‚   (èšåˆ & æ’åº)  â”‚                             â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                  â”‚                                       â”‚
â”‚                                  â–¼                                       â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                         â”‚  TipPresenter   â”‚                             â”‚
â”‚                         â”‚  (æ¨é€ & å±•ç¤º)   â”‚                             â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æ¨¡å‹

```typescript
// Tip ç±»å‹æšä¸¾
enum TipType {
  FOCUS_SUGGESTION = "focus_suggestion", // èšç„¦å»ºè®®
  LEARNING_INSIGHT = "learning_insight", // å­¦ä¹ æ´è§
  LEARNING_RESOURCE = "learning_resource", // å­¦ä¹ èµ„æº
  NEWS_DIGEST = "news_digest", // èµ„è®¯æ¨é€
  BREAK_REMINDER = "break_reminder", // ä¼‘æ¯æé†’
  PRIORITY_ALERT = "priority_alert", // ä¼˜å…ˆçº§æé†’
}

interface SmartTip {
  id: string;
  type: TipType;
  title: string;
  content: string;
  priority: "low" | "medium" | "high";
  relatedTopic?: string; // å…³è”ä¸»é¢˜
  relatedContextIds: string[]; // å…³è”çš„ ProcessedContext
  actionItems?: TipAction[]; // å¯æ‰§è¡Œæ“ä½œ
  expiresAt?: Date; // è¿‡æœŸæ—¶é—´
  createdAt: Date;
}

interface TipAction {
  label: string;
  type: "link" | "dismiss" | "snooze" | "focus";
  payload: any;
}
```

### SQLite è¡¨ç»“æ„

```sql
-- æ‰©å±• tips è¡¨
CREATE TABLE tips (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    type TEXT NOT NULL,               -- TipType æšä¸¾å€¼
    title TEXT,
    content TEXT NOT NULL,
    priority TEXT DEFAULT 'medium',
    related_topic TEXT,               -- å…³è”ä¸»é¢˜ï¼ˆå¦‚ "TypeScript"ï¼‰
    related_context_ids TEXT,         -- JSON æ•°ç»„
    action_items TEXT,                -- JSON æ•°ç»„
    is_read BOOLEAN DEFAULT 0,
    is_dismissed BOOLEAN DEFAULT 0,
    expires_at DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- å­¦ä¹ ä¼šè¯è¡¨ï¼ˆåŸºäº SEMANTIC_CONTEXT åˆ†æè‡ªåŠ¨æ£€æµ‹ï¼‰
CREATE TABLE learning_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    topic TEXT NOT NULL,              -- æ¨æ–­çš„å­¦ä¹ ä¸»é¢˜
    duration INTEGER NOT NULL,        -- æœ¬æ¬¡æ—¶é•¿ï¼ˆç§’ï¼‰
    semantic_ratio REAL,              -- SEMANTIC_CONTEXT å æ¯”
    topic_similarity REAL,            -- ä¸»é¢˜ç›¸ä¼¼åº¦
    subtopics TEXT,                   -- JSON: æ¶‰åŠçš„å­ä¸»é¢˜
    context_ids TEXT,                 -- JSON: å…³è”çš„ä¸Šä¸‹æ–‡ IDs
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- å­¦ä¹ ä¸»é¢˜æ±‡æ€»è§†å›¾ï¼ˆä¾¿äºæŸ¥è¯¢ç´¯è®¡æ—¶é•¿ï¼‰
CREATE VIEW learning_topics_summary AS
SELECT
    topic,
    SUM(duration) as total_duration,
    COUNT(*) as session_count,
    MIN(created_at) as first_seen,
    MAX(created_at) as last_seen
FROM learning_sessions
GROUP BY topic;

-- ç´¢å¼•
CREATE INDEX idx_tips_type ON tips (type);
CREATE INDEX idx_tips_created ON tips (created_at);
CREATE INDEX idx_learning_sessions_topic ON learning_sessions (topic);
CREATE INDEX idx_learning_sessions_time ON learning_sessions (created_at);
```

---

## åŠŸèƒ½ä¸‰ï¼šFocus Modeï¼ˆä¸»é¢˜èšç„¦æ¨¡å¼ï¼‰

### åŠŸèƒ½æ¦‚è¿°

ç”¨æˆ·å¯ä»¥**ä¸»åŠ¨è®¾å®š**ä¸€ä¸ªèšç„¦ä¸»é¢˜ï¼ˆå¦‚"å­¦ä¹  Next.js 16"ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ”¶é›†æ‰€æœ‰ç›¸å…³ä¸Šä¸‹æ–‡ï¼Œå¹¶ç»´æŠ¤ä¸€ä»½æŒç»­æ›´æ–°çš„çŸ¥è¯†æ–‡æ¡£ã€‚

### ç”¨æˆ·åœºæ™¯

> _"æˆ‘æœ€è¿‘åœ¨å­¦ Next.js 16ï¼Œå¸Œæœ›æŠŠæ‰€æœ‰çœ‹è¿‡çš„å†…å®¹ã€é‡åˆ°çš„é—®é¢˜ã€å­¦åˆ°çš„ä¸œè¥¿éƒ½æ•´ç†æˆä¸€ä»½æ–‡æ¡£ã€‚"_

### ä¸ Smart Tips çš„åŒºåˆ«

| ç»´åº¦         | Smart Tips (å­¦ä¹ è¿½è¸ª) | Focus Mode     |
| :----------- | :-------------------- | :------------- |
| **è§¦å‘æ–¹å¼** | è‡ªåŠ¨æ£€æµ‹              | ç”¨æˆ·ä¸»åŠ¨åˆ›å»º   |
| **ä¸»é¢˜æ¥æº** | ç³»ç»Ÿæ¨æ–­              | ç”¨æˆ·æŒ‡å®š       |
| **è¾“å‡ºå½¢å¼** | é€šçŸ¥æ¨é€              | æŒç»­æ›´æ–°çš„æ–‡æ¡£ |
| **æ·±åº¦**     | è½»é‡æç¤º              | å®Œæ•´çŸ¥è¯†æ²‰æ·€   |
| **æ—¶æ•ˆæ€§**   | å®æ—¶/çŸ­æœŸ             | é•¿æœŸç§¯ç´¯       |

### åŠŸèƒ½è¯¦æƒ…

#### 3.1 åˆ›å»ºèšç„¦ä¸»é¢˜

**ç”¨æˆ·è¾“å…¥**ï¼š

- ä¸»é¢˜åç§°ï¼ˆå¿…å¡«ï¼‰ï¼šå¦‚ "å­¦ä¹  Next.js 16"
- è¡¥å……æè¿°ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ "é‡ç‚¹å…³æ³¨ App Router å’Œ Cache Components"
- å…³è”å…³é”®è¯ï¼ˆå¯é€‰ï¼‰ï¼šå¦‚ ["nextjs", "react", "ssr", "cache"]

**ç³»ç»Ÿå¤„ç†**ï¼š

1. ä½¿ç”¨ LLM æ‰©å±•å…³é”®è¯
2. ç”Ÿæˆä¸»é¢˜ Embedding
3. åˆ›å»ºåˆå§‹æ–‡æ¡£æ¡†æ¶

#### 3.2 è‡ªåŠ¨å…³è”ä¸Šä¸‹æ–‡

æ¯å½“æ–°çš„ `ProcessedContext` å…¥åº“æ—¶ï¼š

1. è®¡ç®—ä¸æ‰€æœ‰æ´»è·ƒ Focus Topic çš„ç›¸ä¼¼åº¦
2. è¶…è¿‡é˜ˆå€¼ï¼ˆé»˜è®¤ 0.7ï¼‰åˆ™å»ºç«‹å…³è”
3. æ›´æ–°ä¸»é¢˜çš„ç»Ÿè®¡ä¿¡æ¯

```typescript
interface FocusTopicMatcher {
  // åŒ¹é…æ–°ä¸Šä¸‹æ–‡
  matchContext(context: ProcessedContext): FocusMatch[];

  // è¿”å›åŒ¹é…ç»“æœ
  interface FocusMatch {
    topicId: number;
    similarity: number;
    matchedKeywords: string[];
  }
}
```

#### 3.3 æ™ºèƒ½æ–‡æ¡£ç”Ÿæˆ

**ç”Ÿæˆæ—¶æœº**ï¼š

- å®šæ—¶ç”Ÿæˆï¼ˆæ¯ 2 å°æ—¶æ£€æŸ¥æ˜¯å¦æœ‰æ–°å†…å®¹ï¼‰
- ç”¨æˆ·æ‰‹åŠ¨è§¦å‘
- å…³è”ä¸Šä¸‹æ–‡æ•°é‡è¾¾åˆ°é˜ˆå€¼

**æ–‡æ¡£ç»“æ„**ï¼š

```markdown
# Focus: å­¦ä¹  Next.js 16

> åˆ›å»ºäº 2025-11-29 | æœ€åæ›´æ–° 2025-11-30 15:30
> ç´¯è®¡å…³æ³¨æ—¶é•¿ï¼š4 å°æ—¶ 32 åˆ†é’Ÿ | å…³è”ä¸Šä¸‹æ–‡ï¼š28 æ¡

## ğŸ“‹ æ¦‚è§ˆ

åŸºäºä½ æœ€è¿‘çš„å­¦ä¹ æ´»åŠ¨ï¼Œè‡ªåŠ¨æ•´ç†çš„ Next.js 16 å­¦ä¹ ç¬”è®°ã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### App Router

- æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªè·¯ç”±æ®µ
- æ”¯æŒ layout.tsxã€page.tsxã€loading.tsx ç­‰çº¦å®šæ–‡ä»¶
- [æ¥æºï¼š11-29 14:30 é˜…è¯»å®˜æ–¹æ–‡æ¡£]

### Cache Components

- æ–°çš„ç¼“å­˜æœºåˆ¶ï¼Œä½¿ç”¨ "use cache" æŒ‡ä»¤
- æ”¯æŒ cacheLife() é…ç½®ç¼“å­˜ç­–ç•¥
- [æ¥æºï¼š11-30 10:15 è§‚çœ‹æ•™ç¨‹è§†é¢‘]

## ğŸ“ å­¦ä¹ è¿›åº¦

- [x] åŸºç¡€è·¯ç”±æ¦‚å¿µ
- [x] æ•°æ®è·å–æ–¹å¼
- [ ] ç¼“å­˜ç­–ç•¥æ·±å…¥
- [ ] éƒ¨ç½²ä¼˜åŒ–

## ğŸ› é‡åˆ°çš„é—®é¢˜

### TypeError: Cannot read property 'params'

- æ—¶é—´ï¼š11-29 16:45
- åŸå› ï¼šNext.js 16 ä¸­ params å˜ä¸º Promise
- è§£å†³ï¼šä½¿ç”¨ await params æˆ– use(params)

## ğŸ’¡ æ”¶è·ä¸æ´è§

- Server Components é»˜è®¤ï¼Œéœ€è¦å®¢æˆ·ç«¯äº¤äº’æ—¶æ‰ç”¨ "use client"
- æ–°çš„ Turbopack ç¼–è¯‘é€Ÿåº¦æå‡æ˜æ˜¾

## ğŸ“š å‚è€ƒèµ„æº

- Next.js 16 å®˜æ–¹æ–‡æ¡£
- Vercel Blog: What's new in Next.js 16
- YouTube: Lee Robinson - Next.js 16 Deep Dive

---

_æ­¤æ–‡æ¡£ç”± MineContext è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤_
```

### æ•°æ®æ¨¡å‹

```typescript
interface FocusTopic {
  id: number;
  title: string; // "å­¦ä¹  Next.js 16"
  description?: string;
  keywords: string[];
  embedding: number[]; // 1536 ç»´å‘é‡
  isActive: boolean;
  documentId?: number; // å…³è”çš„ vaults æ–‡æ¡£ ID
  stats: FocusStats;
  createdAt: Date;
  updatedAt: Date;
}

interface FocusStats {
  totalDuration: number; // ç´¯è®¡å…³æ³¨æ—¶é•¿ï¼ˆç§’ï¼‰
  contextCount: number; // å…³è”ä¸Šä¸‹æ–‡æ•°é‡
  lastActivityAt: Date; // æœ€åæ´»åŠ¨æ—¶é—´
}

interface FocusDocument {
  overview: string;
  concepts: ConceptSection[];
  progress: ProgressItem[];
  problems: ProblemRecord[];
  insights: string[];
  resources: ResourceLink[];
}
```

### SQLite è¡¨ç»“æ„

```sql
-- èšç„¦ä¸»é¢˜è¡¨ï¼ˆç”¨æˆ·ä¸»åŠ¨åˆ›å»ºï¼‰
CREATE TABLE focus_topics (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    title TEXT NOT NULL,
    description TEXT,
    keywords TEXT,                    -- JSON æ•°ç»„
    embedding BLOB,                   -- å‘é‡æ•°æ®
    is_active BOOLEAN DEFAULT 1,
    document_id INTEGER,              -- å…³è” vaults è¡¨
    total_duration INTEGER DEFAULT 0,
    context_count INTEGER DEFAULT 0,
    last_activity_at DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (document_id) REFERENCES vaults (id)
);

-- ä¸»é¢˜-ä¸Šä¸‹æ–‡å…³è”è¡¨
CREATE TABLE focus_topic_contexts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    topic_id INTEGER NOT NULL,
    context_id TEXT NOT NULL,         -- ProcessedContext UUID
    similarity REAL,                  -- ç›¸ä¼¼åº¦åˆ†æ•°
    matched_keywords TEXT,            -- JSON: åŒ¹é…çš„å…³é”®è¯
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (topic_id) REFERENCES focus_topics (id),
    UNIQUE (topic_id, context_id)
);

-- ç´¢å¼•
CREATE INDEX idx_focus_topics_active ON focus_topics (is_active);
CREATE INDEX idx_focus_contexts_topic ON focus_topic_contexts (topic_id);
```

---

## åŠŸèƒ½äº¤äº’çŸ©é˜µ

| åŠŸèƒ½                 | æ•°æ®è¾“å…¥                 | å¤„ç†é€»è¾‘        | æ•°æ®è¾“å‡º      | ç”¨æˆ·äº¤äº’  |
| :------------------- | :----------------------- | :-------------- | :------------ | :-------- |
| **Context Summary**  | ProcessedContext (15min) | LLM æ‘˜è¦ç”Ÿæˆ    | ç³»ç»Ÿé€šçŸ¥      | æŸ¥çœ‹/å¿½ç•¥ |
| **Focus Suggestion** | ProcessedContext + todo  | LLM åˆ†æå»ºè®®    | Tips æ¨é€     | é‡‡çº³/å¿½ç•¥ |
| **Learning Tracker** | ProcessedContext         | æ¨¡å¼è¯†åˆ« + LLM  | Tips + è¿›åº¦å¡ | ç¡®è®¤/è°ƒæ•´ |
| **Web Search**       | é•¿æ—¶å…³æ³¨ä¸»é¢˜             | API æœç´¢ + è¿‡æ»¤ | èµ„è®¯å¡ç‰‡      | é˜…è¯»/æ”¶è— |
| **Focus Mode**       | ç”¨æˆ·è¾“å…¥ + Context       | å‘é‡åŒ¹é… + LLM  | Markdown æ–‡æ¡£ | ç¼–è¾‘/å¯¼å‡º |

---

## é…ç½®é¡¹æ±‡æ€»

```yaml
# config/features.yaml

context_summary:
  enabled: true
  interval_minutes: 15 # æ¨é€é—´éš”
  quiet_hours: [23, 7] # é™é»˜æ—¶æ®µ
  detail_level: normal # brief | normal | detailed

smart_tips:
  enabled: true

  focus_suggestion:
    enabled: true
    stuck_threshold_minutes: 20 # å¡é¡¿æ£€æµ‹é˜ˆå€¼
    switch_threshold: 3 # åˆ‡æ¢æ¬¡æ•°é˜ˆå€¼ï¼ˆ5åˆ†é’Ÿå†…ï¼‰

  learning_tracker:
    enabled: true
    detection_threshold: 0.6 # å­¦ä¹ æ´»åŠ¨æ£€æµ‹ç½®ä¿¡åº¦
    min_duration_minutes: 30 # æœ€å°ç´¯è®¡æ—¶é•¿

  web_search:
    enabled: true
    provider: tavily # tavily | bing | serp
    api_key: ${SEARCH_API_KEY}
    trigger_duration_minutes: 20 # è§¦å‘æœç´¢çš„æŒç»­æ—¶é•¿
    max_results: 5
    recency: week # day | week | month

focus_mode:
  enabled: true
  similarity_threshold: 0.7 # ä¸Šä¸‹æ–‡å…³è”é˜ˆå€¼
  document_update_interval_hours: 2 # æ–‡æ¡£æ›´æ–°é—´éš”
  auto_keyword_expansion: true # LLM è‡ªåŠ¨æ‰©å±•å…³é”®è¯
```

---

## æŠ€æœ¯ä¾èµ–

| ç»„ä»¶         | ç”¨é€”           | æ¨èæ–¹æ¡ˆ              |
| :----------- | :------------- | :-------------------- |
| **å®šæ—¶è°ƒåº¦** | å®šæ—¶ä»»åŠ¡è§¦å‘   | `node-schedule`       |
| **å‘é‡è®¡ç®—** | ç›¸ä¼¼åº¦åŒ¹é…     | `Voyager` (WASM)      |
| **LLM è°ƒç”¨** | æ‘˜è¦/åˆ†æ/ç”Ÿæˆ | `openai` SDK          |
| **Web æœç´¢** | èµ„è®¯è·å–       | Tavily API            |
| **é€šçŸ¥æ¨é€** | ç³»ç»Ÿé€šçŸ¥       | Electron Notification |
| **æ•°æ®å­˜å‚¨** | ç»“æ„åŒ–æ•°æ®     | `better-sqlite3`      |

---

## åç»­æ‰©å±•æ–¹å‘

- [ ] æ•ˆç‡ä»ªè¡¨ç›˜ï¼ˆProductivity Dashboardï¼‰
- [ ] çŸ¥è¯†å›¾è°±å¯è§†åŒ–ï¼ˆKnowledge Graphï¼‰
- [ ] è·¨è®¾å¤‡åŒæ­¥
- [ ] å›¢é˜Ÿåä½œç‰ˆæœ¬
- [ ] æ’ä»¶ç³»ç»Ÿ

---

_æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0 | æ›´æ–°æ—¥æœŸï¼š2025-11-29_
